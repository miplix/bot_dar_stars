# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ **Telegram Stars** —Å –¥–≤—É–º—è —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ø–æ–¥–ø–∏—Å–∫–∏.

---

## üí≥ –¢–∞—Ä–∏—Ñ—ã

### üìÖ –ú–µ—Å—è—Ü: 249 ‚≠êÔ∏è
- 30 –¥–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞

### üìÜ –ì–æ–¥: 2499 ‚≠êÔ∏è
- 365 –¥–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞
- –í—ã–≥–æ–¥–∞ ~17%

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** ‚Üí –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ 7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ
2. **–ü–æ—Å–ª–µ –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞** ‚Üí –ù—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–∞—Ä–æ–≤
3. **–û–ø–ª–∞—Ç–∞** ‚Üí –ù–∞–∂–∞—Ç—å "üíé –ü–æ–¥–ø–∏—Å–∫–∞" ‚Üí –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ ‚Üí –û–ø–ª–∞—Ç–∏—Ç—å Stars
4. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è** ‚Üí –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏:

```python
subscription = await db.check_subscription(user_id)
if subscription['active']:
    # –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω
else:
    # –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
```

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É `users`:
- `subscription_type` - —Ç–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏ (trial/premium_month/premium_year)
- `subscription_end_date` - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `payments`:
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –°—É–º–º–∞, –≤–∞–ª—é—Ç–∞, —Å—Ç–∞—Ç—É—Å
- –î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É:
```python
# –í—ã–¥–∞—Ç—å –º–µ—Å—è—á–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É
await db.update_subscription(user_id, "premium_month", 30)

# –í—ã–¥–∞—Ç—å –≥–æ–¥–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É
await db.update_subscription(user_id, "premium_year", 365)
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É:
```python
subscription = await db.check_subscription(user_id)
# {"active": True/False, "type": "...", "end_date": datetime}
```

### –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂:
```python
await db.add_payment(user_id, 249, "XTR", "premium_month", "completed")
```

---

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ú–µ–Ω—é –ø–æ–¥–ø–∏—Å–∫–∏:
- ‚≠êÔ∏è –û—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–µ–º–∏—É–º
- ‚ÑπÔ∏è –û –ø–æ–¥–ø–∏—Å–∫–∞—Ö

### –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞:
- üìÖ –ú–µ—Å—è—Ü - 249 ‚≠êÔ∏è
- üìÜ –ì–æ–¥ - 2499 ‚≠êÔ∏è
- ¬´ –ù–∞–∑–∞–¥

---

## üîí –ó–∞—â–∏—Ç–∞ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–∏–º–µ—Ä –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏:
```python
@dp.message(Command("calculate"))
async def calculate_gifts(message: Message):
    user_id = message.from_user.id
    subscription = await db.check_subscription(user_id)
    
    if not subscription['active']:
        # –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
        await message.answer(
            "‚ö†Ô∏è –ù—É–∂–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞",
            reply_markup=get_subscription_menu()
        )
        return
    
    # –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞
    # ... —Ä–∞—Å—á–µ—Ç –¥–∞—Ä–æ–≤ ...
```

---

## üîÆ –î–ª—è –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–µ–º–∏—É–º:
```python
# –î–ª—è —Ñ—É–Ω–∫—Ü–∏–π —Ç–æ–ª—å–∫–æ –¥–ª—è premium
if subscription['type'] not in ['premium_month', 'premium_year']:
    await message.answer("‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–º–∏—É–º!")
    return
```

---

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- ‚úÖ –¶–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (249/2499 Stars)
- ‚úÖ –ò–Ω–≤–æ–π—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- ‚úÖ –û–ø–ª–∞—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –í Telegram:

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: `@test_bot_dlya_darov_bot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ "üíé –ü–æ–¥–ø–∏—Å–∫–∞"
4. –í—ã–±–µ—Ä–∏—Ç–µ "‚≠êÔ∏è –û—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–µ–º–∏—É–º"
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
6. –û–ø–ª–∞—Ç–∏—Ç–µ (–≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ - –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
7. –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è!

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
sqlite3 data/bot_database.db "SELECT user_id, subscription_type, subscription_end_date FROM users;"
```

---

## üìù –í–∞–∂–Ω–æ

### –ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥:
- 7 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–æ–¥–ª–µ–Ω–∏–µ:
- –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ ‚Üí –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –æ—Ç –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –ï—Å–ª–∏ –∏—Å—Ç–µ–∫–ª–∞ ‚Üí –Ω–∞—á–∞–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ –æ–ø–ª–∞—Ç—ã

### –í–∞–ª—é—Ç–∞:
- **XTR** = Telegram Stars
- –û–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏!

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `PAYMENT_SYSTEM.md`  
**–î–∞—Ç–∞:** 02.01.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

