# üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

## ‚ö†Ô∏è –û—à–∏–±–∫–∞ ¬´Could not find the table ... in the schema cache¬ª (PGRST205)

–ë–æ—Ç –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É **`ouodquakgyyeiyihmoxg`** (—Å–º. `SUPABASE_URL` –≤ –ª–æ–≥–∞—Ö). –¢–∞–±–ª–∏—Ü—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã **–∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ**.

- –ï—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ MCP Supabase –∏–ª–∏ –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî —É –Ω–µ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å **–¥—Ä—É–≥–æ–π** –ø—Ä–æ–µ–∫—Ç. –¢–∞–±–ª–∏—Ü—ã —Ç–∞–º –Ω–µ –ø–æ–º–æ–≥—É—Ç –±–æ—Ç—É.
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:** –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤ –ø—Ä–æ–µ–∫—Ç–µ –±–æ—Ç–∞: [Supabase Dashboard](https://app.supabase.com/) ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **`ouodquakgyyeiyihmoxg`** ‚Üí **SQL Editor** ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ `migrations/001_create_tables.sql` ‚Üí **Run**.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ (–∏–ª–∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ webhook).

---

## –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º?

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç `python scripts/apply_migration.py` –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è, –≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞—Ä–æ–ª–µ–º –≤ `SUPABASE_DB_URL`.

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ Supabase Dashboard (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±!

### –®–∞–≥–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://app.supabase.com/
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `ouodquakgyyeiyihmoxg`

2. **–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ **SQL Editor**
   - –ù–∞–∂–º–∏—Ç–µ **New query**

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª: `migrations/001_create_tables.sql`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å** SQL –∫–æ–¥

4. **–í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ**
   - –í—Å—Ç–∞–≤—å—Ç–µ SQL –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Supabase
   - –ù–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ `Ctrl+Enter`)

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –æ—Ç–∫—Ä–æ–π—Ç–µ **Table Editor**
   - –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `telegram_`

**–ì–æ—Ç–æ–≤–æ!** ‚úÖ

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å SUPABASE_DB_URL

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/apply_migration.py`:

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí **Settings** ‚Üí **Database**
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Database password**
3. –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –∑–∞–±—ã—Ç –∏–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
   - –ù–∞–∂–º–∏—Ç–µ **Reset database password**
   - **–í–ê–ñ–ù–û:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å —Å—Ä–∞–∑—É!

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `SUPABASE_DB_URL`:

```env
SUPABASE_DB_URL=postgresql://postgres:–ù–û–í–´–ô_–ü–ê–†–û–õ–¨@db.ouodquakgyyeiyihmoxg.supabase.co:5432/postgres
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `–ù–û–í–´–ô_–ü–ê–†–û–õ–¨` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–∑ —à–∞–≥–∞ 1
- –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (@, #, %, &, –∏ —Ç.–¥.), –∏—Ö –Ω—É–∂–Ω–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 3: –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

–ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:

```python
from urllib.parse import quote_plus

password = "–≤–∞—à_–ø–∞—Ä–æ–ª—å_—Å–æ_—Å–ø–µ—Ü_—Å–∏–º–≤–æ–ª–∞–º–∏@#%"
encoded = quote_plus(password)
print(encoded)  # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ URL
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –∑–∞–º–µ–Ω–∏—Ç–µ:
- `@` ‚Üí `%40`
- `#` ‚Üí `%23`
- `%` ‚Üí `%25`
- `&` ‚Üí `%26`
- `+` ‚Üí `%2B`
- `=` ‚Üí `%3D`

### –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `.env`:

```bash
python scripts/apply_migration.py
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
python scripts/setup_database_connection.py
```

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ URL:

```bash
python scripts/check_database_url.py
```

---

## üìä –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

```bash
python scripts/show_tables.py
```

–ò–ª–∏ –≤ Supabase Dashboard ‚Üí **Table Editor** –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- `telegram_users`
- `telegram_calculations`
- `telegram_gifts_knowledge`
- `telegram_ai_interactions`
- `telegram_payments`
- `telegram_alphabet`
- `telegram_promocodes`
- `telegram_promocode_usage`
- `telegram_ma_zhi_kun_positions`
- `telegram_gift_fields`

---

## üóë –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Supabase

–ï—Å–ª–∏ –≤—ã –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç **`sukhbbohmkbvbivthovp`** (–≤—Å–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ `ouodquakgyyeiyihmoxg`):

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **`sukhbbohmkbvbivthovp`**
3. **Settings** ‚Üí **General** ‚Üí –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã **Delete project**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ (—ç—Ç–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ)

–£–¥–∞–ª–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é –≤ Dashboard, —á–µ—Ä–µ–∑ –∫–æ–¥ –∏–ª–∏ API –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª–∏—Ç—å –Ω–µ–ª—å–∑—è.

---

## ‚ùì –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç `ouodquakgyyeiyihmoxg` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–µ–∫—Ç—É
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–æ—Å–æ–± 1 (—á–µ—Ä–µ–∑ Dashboard) - –æ–Ω –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!
